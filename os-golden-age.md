操作系统将迎来它的黄金时代

1. 操作系统在信息领域的“实际”重要性在迅速提升

虽然大家都知道操作系统很重要。但在前几年，所谓的操作系统重要，还主要停留在“口头上”或“面子上”。个人觉得其根本原因在于操作系统的前期投入巨大，研发/维护/更新周期长，能形成一定生态规模的操作系统在全世界也没有几个，能够打破已有市场的新型操作系统更少。在这样的情况下，能够通过自研操作系统直接盈利的国内企业就太少了。即使是声明做（通用）操作系统研发的公司，绝大部分也是建立在Linux官方内核或某Linux发行版上的下游企业。这导致企业难以主动投入足够的资金和人力进行操作系统的研发工作。

但现实情况在发生变化。首先，我们看到华为在这两年迅速成为了国内操作系统的领军企业之一，推出了它主导的OpenEuler服务器领域操作系统和OpenHarmony移动终端/物联网操作系统。这其中有众所周知的华为被断供的原因，也有国际形势的大背景因素。其次，当国内IT领先企业发展到阶段，采用外来的操作系统会受到功能、性能和安全可靠等特定需求的限制，而这些企业已经有一定的实力进行操作系统研发方面的投入。比如阿里集团、腾讯、字节跳动、蚂蚁等都是这样的代表，它们通过改进或定制Linux等操作系统来提升自身业务的发展。最后，在新兴领域，比如AI、机器学习、物联网、AR/VR、无人系统、工业机器人等，吸引了大量的资金，当现有的操作系统并不能充分满足这些领域的深入发展需求，这就推动了这些领域的新玩家也投入到面向这些领域的新型操作系统的研究中来。


2. 操作系统的边界在多层次扩展

在大学计算机专业的操作系统课程中，一般给操作系统的定义是：操作系统是管理硬件资源、控制程序运行、改善人机界面和为应用软件提供支持的一种系统软件。并把操作系统的边界定位在内核（kernel）层面，如Linux就是一种操作系统内核，而运行在用户态的shell程序或GUI程序则是操作系统的交互界面，并不属于操作系统内核。但目前的操作系统的边界已经被大大的扩展了。

在产业界，操作系统在努力向国际先进水平靠近。如国内的OpenEuler操作系统、龙蜥操作系统、麒麟操作系统、统信操作系统等，与国外的Ubuntu操作系统、RedHat操作系统、SUSE操作系统类似，都是基于Linux操作系统内核的多种软件集合形成的Linux发行版。而运行在手机上的OpenHarmony操作系统与Google的Android操作系统类似，都是基于Linux操作系统内核，提供适合触摸交互的图形交互软件框架和移动终端共性服务的移动终端类操作系统。运行在嵌入式设备上的OpenHarmony操作系统、RT-Thread、Sylinx等则是属于实时操作系统（RTOS）范围，除了在传统工业控制上继续发展之外，还在互联网、物联网、分布式协同领域等快速突破，形成了开发环境、分布式协同等更广泛的系统级支持。在目前火热的自动驾驶领域，不少国内新造车企业（如理想、蔚来、小鹏等），与国外的特斯拉等在多方位进行竞争，都开展了面向新型电子驾驶、自动驾驶的操作系统研发，形成了新的操作系统产业热点。

在学术界，有一种有意思的观点，从上世纪六十年代开始的大型机/主机时代，发展到上世纪八十年代开始的个人计算机时代到本世纪出的互联网时代，操作系统每过二十年左右会出现一次跨越式发展机遇，这主要是计算环境发生了很大的变化，导致操作系统会更新换代，并引导相应的应用场景呈现数量级增长，形成围绕操作系统的产业生态。最近，一些学者提出了操作系统将朝着泛在操作系统（Ubiquitous Operating System，UOS）演进的观点。国家自然基金委已经开始推动泛在操作系统及生态构建研究”专项项目的研究。围绕机器学习、物联网、AR/VR等未来人机物融合的泛在计算新模式和新场景将推动新一代操作系统的发展。泛在操作系统本质上属于领域和行业的专用软件系统，而某些行业应用场景（如智慧城市、无人工厂等）的多样性和足够的广泛性，意味着围绕行业构建生态成为可能。因此，未来的泛在操作系统将呈现多个基于领域的操作系统生态共存的多元化格局。

3. 编写操作系统的编程语言在变化

C语言是为了编写UNIX操作系统而诞生的高级语言，在它发展的五十多年的历史中，由于基于C语言的UNIX、Linux、windows等先后在不同领域的统治地位，使得C语言在操作系统开发的编程语言中，占据了垄断地位。但由于C语言的一些潜在问题（如灵活的指针带来的编程中的内存相关缺陷和并发相关缺陷），使得它的挑战者层出不穷。如上世纪九十年代诞生的Java语言，成为了目前移动终端操作系统--Android的框架层和应用层的主力编程语言，Go语言成为容器(container)类系统软件、分布式系统软件，包括分布式文件系统等的重要开发语言。Rust语言一个专注于安全和高性能的系统编程语言，目前在操作系统内核等领域成为了引入瞩目的新星。在Stack Overflow开发者调查的“最受喜爱编程语言”评选项目中持续多年摘取桂冠。在2019年，微软专家表示Rust是C和C++的最佳替代方案。2020年，Linux之父Linus回复Rust for Linux讨论：默认情况下可以启动支持，并表示Rust可以首先应用到驱动程序。2021年，Linux内核团队发布添加Rust支持的v1/v2补丁。预计到2022年，开发者有望看到Linux内核正式支持Rust语言。除了用Rust语言编写传统操作系统内核，我们还看到MIT PDOS研究组探索了用Go语言编写类Unix操作系统的优势分析的研究；Stanford大学用Rust语言编写面向基于MCU处理器嵌入式系统的Tock安全操作系统；Rice大学在探索用Rust语言编写可不用重启并及时动态更新的操作系统内核；清华大学操作系统课题组在探索用Rust语言编写基于异步协程调度机制的安全硬实时操作系统和系统级虚拟机，并在本科操作系统课程中开展基于Rust和C的操作系统实验教学。

4. 小结

2019年2月出版的Communications of the ACM，刊登了图灵奖得主David Patterson与John Hennessy的署名文章“A New Golden Age for computer Architecture”，提出“计算机体系结构领域将迎来又一个黄金十年，就像20世纪80年代我们做研究那时一样，新的架构设计将会带来更低的成本，更优的能耗、安全和性能。”。编译器专家、LLVM之父Chris Lattner在2021年的系统领域著名的ASPLOS会议上，做了主题发言“The Golden Age of Compiler Design in an Era of HW/SW Co-design”，提出“需要下一代编译器和编程语言来帮助解决硬件的碎片化”。

Patterson和Hennessey提过一个观点：我们来到了计算机架构的文艺复兴时代，需要把计算机行业上下游人员垂直整合起来，大家既要懂硬件，也要懂软件。因为世界变化得很快，所以思考问题时要回归第一性原理，要用新的眼光去重新看待旧事物。

个人认为，上述计算机专家的观点也完全适合现在的操作系统发展。当编程语言和体系机构都迎来了黄金时代的当下，操作系统也将迎来它的黄金时代，也许将来的操作系统不是象现在统治世界的Linux、Windows那样臃肿而庞大，而是各种可以迅速组合形成的，并且功能丰富多彩的定制操作系统，能够快速适配未来多种多样的处理器、加速器、外设和应用需求。

2022.04.29